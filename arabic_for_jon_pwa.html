<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Arabic for Jon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" sizes="180x180" href="icon-arabic-jon.png" />

  <script>
    const manifest = {
      name: "Arabic for Jon",
      short_name: "Arabic",
      start_url: ".",
      display: "standalone",
      background_color: "#000000",
      theme_color: "#000000",
      icons: [
        {
          src: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QCMRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAFigAwAEAAAAAQAAAGoAAAAA/+EDQ2FsaWJyYXRlZCB3aXRoIEdJTVD/2wBDA...
          sizes: "512x512",
          type: "image/jpeg"
        }
      ]
    };

    (function attachManifest() {
      const blob = new Blob([JSON.stringify(manifest)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const link = document.createElement("link");
      link.rel = "manifest";
      link.href = url;
      document.head.appendChild(link);
    })();

    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        const swCode = `
          const CACHE = 'arabic-for-jon-v5';
          self.addEventListener('install', e => {
            e.waitUntil(caches.open(CACHE).then(c => c.addAll(['./', './arabic_for_jon_pwa.html'])));
          });
          self.addEventListener('fetch', e => {
            e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)));
          });
        `;
        const blob = new Blob([swCode], { type: "application/javascript" });
        const swURL = URL.createObjectURL(blob);
        navigator.serviceWorker.register(swURL);
      });
    }
  </script>

  <style>
    :root {
      --bg: #f6f6f6;
      --card-bg: #ffffff;
      --card-border: rgba(0, 0, 0, 0.08);
      --text-main: #111111;
      --text-muted: #6b7280;
      --accent: #111111;
      --accent-soft: rgba(0, 0, 0, 0.04);
      --pill-bg: #ffffff;
      --pill-border: rgba(0, 0, 0, 0.16);
      --control-bg: #ffffff;
      --control-border: rgba(0, 0, 0, 0.16);
      --known: #15803d;
      --danger: #b91c1c;
    }

    body.theme-minimal {
      --bg: #f5f5f5;
      --card-bg: #ffffff;
      --card-border: rgba(0, 0, 0, 0.10);
      --text-main: #111111;
      --text-muted: #6b7280;
      --accent: #111111;
      --accent-soft: rgba(0, 0, 0, 0.03);
    }

    body.theme-minimal button.primary,
    body.theme-minimal .tab.active,
    body.theme-minimal .theme-btn.theme-active {
      color: white !important;
    }

    body.theme-colorful {
      --bg: linear-gradient(
        140deg,
        #F6F1E9 0%,
        #F0D8C9 30%,
        #D7A392 60%,
        #6F8FAB 100%
      );
      --card-bg: linear-gradient(135deg, #F6F1E9, #EBC8B2);
      --accent: #D37F6F;
      --accent-soft: rgba(211, 127, 111, 0.18);
      --pill-bg: rgba(255,255,255,0.95);
    }

    body.theme-dark {
      --bg: radial-gradient(circle at top,#111827 0,#020617 55%);
      --card-bg: #020617;
      --accent: #f2c27b;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: var(--bg);
      color: var(--text-main);
      min-height: 100vh;
      padding: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .app-shell {
      width: 100%;
      max-width: 520px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      flex-wrap: wrap;
    }

    header h1 {
      font-size: 1.1rem;
      margin: 0;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      font-weight: 600;
    }

    .counter {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .streak {
      font-size: 0.8rem;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .filters-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.8rem;
      align-items: center;
    }

    .filters-row label {
      color: var(--text-muted);
      margin-right: 2px;
    }

    .filters-row select {
      background: var(--control-bg);
      color: var(--text-main);
      border-radius: 999px;
      border: 1px solid var(--control-border);
      padding: 4px 10px;
      font-size: 0.8rem;
    }

    .tabs {
      display: flex;
      gap: 4px;
      margin-top: 4px;
    }

    .tab {
      flex: 1;
      padding: 6px 0;
      border-radius: 999px;
      border: 1px solid var(--control-border);
      font-size: 0.8rem;
      text-align: center;
      cursor: pointer;
      background: var(--control-bg);
      color: var(--text-muted);
    }

    .tab.active {
      border-color: var(--accent);
      background: var(--accent);
      color: white;
      font-weight: 600;
    }

    .card {
      position: relative;
      background: var(--card-bg);
      border-radius: 24px;
      padding: 30px 24px 20px;
      min-height: 260px;
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.3),
        0 0 0 1px rgba(0, 0, 0, 0.02);
      border: 1px solid var(--card-border);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      cursor: pointer;
      overflow: hidden;
    }

    .pill {
      position: absolute;
      top: 14px;
      left: 16px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--pill-bg);
      border: 1px solid var(--pill-border);
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
    }

    .side-label {
      position: absolute;
      top: 14px;
      right: 16px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--pill-bg);
      border: 1px solid var(--accent);
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--accent);
    }

    .known-pill {
      position: absolute;
      bottom: 14px;
      right: 16px;
      padding: 4px 10px;
      border-radius: 999px;
      background: var(--pill-bg);
      border: 1px solid var(--known);
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--known);
    }

    .english {
      font-size: 2.2rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 0 8px;
    }

    .arabic {
      font-size: 2.4rem;
      line-height: 1.5;
      direction: rtl;
      font-family: -apple-system, system-ui, "SF Arabic", "Geeza Pro",
        "Arial", "Segoe UI", sans-serif;
    }

    .translit {
      margin-top: 8px;
      font-size: 1.05rem;
      color: var(--text-muted);
    }

    .hint {
      margin-top: 10px;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .controls {
      display: flex;
      gap: 8px;
      margin-top: 4px;
    }

    button {
      flex: 1;
      border-radius: 999px;
      border: 1px solid var(--control-border);
      background: var(--control-bg);
      color: var(--text-main);
      padding: 10px 12px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    button.primary {
      border-color: var(--accent);
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }

    button:active {
      transform: translateY(1px);
      box-shadow: none;
    }

    .small {
      font-size: 0.8rem;
      opacity: 0.9;
    }

    #list-view {
      display: none;
      border-radius: 18px;
      border: 1px solid var(--card-border);
      background: var(--control-bg);
      padding: 10px 10px 6px;
      max-height: 360px;
      flex-direction: column;
      gap: 8px;
    }

    .list-controls {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      align-items: center;
      font-size: 0.8rem;
    }

    .list-controls input,
    .list-controls select {
      background: var(--control-bg);
      border-radius: 999px;
      border: 1px solid var(--control-border);
      padding: 4px 10px;
      font-size: 0.8rem;
      color: var(--text-main);
    }

    .list-body {
      margin-top: 6px;
      overflow-y: auto;
      max-height: 260px;
      padding-right: 2px;
    }

    .list-item {
      padding: 6px 8px;
      border-radius: 12px;
      border: 1px solid var(--card-border);
      margin-bottom: 4px;
      background: var(--card-bg);
      display: flex;
      flex-direction: column;
      gap: 2px;
      cursor: pointer;
    }

    /* theme selector at bottom */
    .theme-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      gap: 8px;
      font-size: 0.75rem;
    }

    .theme-label {
      color: var(--text-muted);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .theme-buttons {
      display: flex;
      gap: 4px;
    }

    .theme-btn {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid var(--control-border);
      background: var(--control-bg);
      font-size: 0.72rem;
      cursor: pointer;
      color: var(--text-muted);
    }

    .theme-btn.theme-active {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
      font-weight: 600;
    }

    /* FIX ‚Äî improve dark mode card readability */
body.theme-dark .english,
body.theme-dark .arabic,
body.theme-dark .translit,
body.theme-dark .hint {
  color: #f9fafb !important;
}

body.theme-dark .side-label {
  color: #f2c27b !important;
  border-color: #f2c27b !important;
}

body.theme-dark .pill {
  color: #9ca3af !important;
  border-color: rgba(148, 163, 184, 0.5) !important;
}


  </style>
</head>

<body class="theme-colorful">
  <div class="app-shell">
    <header>
      <div>
        <h1>Levantine Arabic</h1>
        <span id="counter" class="counter"></span>
      </div>
      <div class="streak" id="streak-label">üî• 0-day streak</div>
    </header>

    <div class="filters-row">
      <div>
        <label for="category-filter">Cards</label>
        <select id="category-filter"></select>
      </div>
      <div>
        <label for="status-filter">Show</label>
        <select id="status-filter">
          <option value="all">All</option>
          <option value="unknown">Unknown</option>
          <option value="known">Known</option>
        </select>
      </div>
    </div>

    <div class="tabs">
      <div class="tab active" id="tab-cards">Cards</div>
      <div class="tab" id="tab-list">Word List</div>
      <div class="tab" id="tab-quiz">Quiz</div>
    </div>

    <div id="cards-view">
      <div id="card" class="card">
        <div class="pill" id="category-pill"></div>
        <div class="side-label" id="side-label">Front ¬∑ EN</div>
        <div id="known-pill" class="known-pill" style="display:none;">Known</div>
        <div id="card-content"></div>
        <div class="hint" id="hint-text">
          Tap card / ‚ÄúFlip‚Äù to see Arabic ¬∑ ÿßÿ∂ÿ∫ÿ∑ / ÿ•ÿ∂ÿ∫ÿ∑Ÿä ŸÑÿ™ŸÇŸÑŸäÿ® ÿßŸÑÿ®ÿ∑ÿßŸÇÿ©
        </div>
      </div>

      <div class="controls">
        <button id="prev-btn">‚üµ Previous</button>
        <button id="flip-btn" class="primary">Flip</button>
        <button id="next-btn">Next ‚ü∂</button>
      </div>

      <div class="controls">
        <button id="toggle-known-btn" class="small">Mark Known</button>
        <button id="shuffle-btn" class="small">Shuffle üîÄ</button>
      </div>
    </div>

    <div id="list-view">
      <div class="list-controls">
        <select id="list-category-filter"></select>
        <input id="list-search" placeholder="Search English..." />
      </div>
      <div class="list-body" id="list-body"></div>
    </div>

    <div id="quiz-view" style="display:none;">
      <div class="quiz-panel" id="quiz-panel">
        <div class="quiz-question" id="quiz-question"></div>
        <div class="quiz-options" id="quiz-options"></div>
        <div class="quiz-meta">
          <span id="quiz-progress"></span>
          <span id="quiz-result"></span>
        </div>
      </div>
      <div class="controls">
        <button id="start-quiz-btn" class="primary small">Start</button>
        <button id="reset-quiz-btn" class="small">Reset</button>
      </div>
    </div>

    <!-- THEME SELECTOR MOVED TO BOTTOM -->
    <div class="theme-row">
      <div class="theme-label">Appearance</div>
      <div class="theme-buttons">
        <button type="button" class="theme-btn" data-theme="minimal">Minimal</button>
        <button type="button" class="theme-btn" data-theme="colorful">Colorful</button>
        <button type="button" class="theme-btn" data-theme="dark">Dark</button>
      </div>
    </div>

    <footer>
      Progress saved locally
    </footer>
  </div>

  <script>
    /* ---- FULL CARD DATA ---- */
    const cards = [


      // 2. Time & Clock Language
      { category: "Time Units", front: "time", arabic: "ŸàŸÇÿ™", translit: "waet" },
      { category: "Time Units", front: "hour / o'clock", arabic: "ÿ≥ÿßÿπÿ©", translit: "saa-a" },
      { category: "Time Units", front: "hours", arabic: "ÿ≥ÿßÿπÿßÿ™", translit: "saa-aat" },
      { category: "Time Units", front: "minute", arabic: "ÿØŸÇŸäŸÇÿ©", translit: "da-ee-a" },
      { category: "Time Units", front: "minutes", arabic: "ÿØŸÇÿßŸäŸÇ", translit: "da-aa-yek" },
      { category: "Time Units", front: "second", arabic: "ÿ´ÿßŸÜŸäÿ©", translit: "saniyeh" },
      { category: "Time Units", front: "seconds", arabic: "ÿ´ŸàÿßŸÜŸä", translit: "tawani" },

      { category: "Fractions", front: "quarter", arabic: "ÿ±ÿ®ÿπ", translit: "rebaa" },
      { category: "Fractions", front: "third", arabic: "ÿ™ŸÑÿ™", translit: "telt" },
      { category: "Fractions", front: "half", arabic: "ŸÜÿµ", translit: "noss" },
      { category: "Fractions", front: "almost", arabic: "ÿ™ŸÇÿ±Ÿäÿ®Ÿãÿß", translit: "ta-reeban" },
      { category: "Fractions", front: "except / minus", arabic: "ÿ•ŸÑÿß", translit: "ella" },

      // 3. Seasons
      { category: "Seasons", front: "season", arabic: "ŸÅÿµŸÑ", translit: "fasel" },
      { category: "Seasons", front: "seasons", arabic: "ŸÅÿµŸàŸÑ", translit: "fusoool" },
      { category: "Seasons", front: "summer", arabic: "ÿµŸäŸÅ", translit: "seif" },
      { category: "Seasons", front: "winter", arabic: "ÿ¥ÿ™ÿß", translit: "sheta" },
      { category: "Seasons", front: "spring", arabic: "ÿ±ÿ®Ÿäÿπ", translit: "rabi" },
      { category: "Seasons", front: "fall / autumn", arabic: "ÿÆÿ±ŸäŸÅ", translit: "khareef" },

      { category: "Seasons Qs", front: "What's your favorite season? (to m)", arabic: "ÿ¥Ÿà ŸÅÿµŸÑŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿü", translit: "shu faslak el-mofaddal?" },
      { category: "Seasons Qs", front: "What's your favorite season? (to f)", arabic: "ÿ¥Ÿà ŸÅÿµŸÑŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿü", translit: "shu faslek el-mofaddal?" },
      { category: "Seasons Qs", front: "What is her favorite season?", arabic: "ÿ¥Ÿà ŸÅÿµŸÑŸáÿß ÿßŸÑŸÖŸÅÿ∂ŸÑÿü", translit: "shu fasel-ha el-mofaddal?" },
      { category: "Seasons Qs", front: "What is his favorite season?", arabic: "ÿ¥Ÿà ŸÅÿµŸÑŸá ÿßŸÑŸÖŸÅÿ∂ŸÑÿü", translit: "shu fasel-o el-mofaddal?" },
      { category: "Seasons Ans", front: "My favorite season is fall.", arabic: "ŸÅÿµŸÑŸä ÿßŸÑŸÖŸÅÿ∂ŸÑ ÿßŸÑÿÆÿ±ŸäŸÅ", translit: "fasle el-mofaddal el-khareef" },
      { category: "Seasons Ans", front: "Her favorite season is winter.", arabic: "ŸÅÿµŸÑŸáÿß ÿßŸÑŸÖŸÅÿ∂ŸÑ ÿßŸÑÿ¥ÿ™ÿß", translit: "fasel-ha el-mofaddal el-sheta" },

      // 4. Weather
      { category: "Weather", front: "weather", arabic: "ÿßŸÑÿ∑ŸÇÿ≥", translit: "el-ta-es" },
      { category: "Weather", front: "weather", arabic: "ÿßŸÑÿ¨Ÿà", translit: "el-jaw" },
      { category: "Weather", front: "nice / pleasant", arabic: "ÿ≠ŸÑŸà", translit: "helou" },
      { category: "Weather", front: "not nice", arabic: "ŸÖÿ¥ ÿ≠ŸÑŸà", translit: "mesh helou" },
      { category: "Weather", front: "very", arabic: "ŸÉÿ™Ÿäÿ±", translit: "kteer" },
      { category: "Weather", front: "hot (weather)", arabic: "ÿ¥Ÿàÿ®", translit: "shob" },
      { category: "Weather", front: "cold (weather)", arabic: "ÿ®ÿ±ÿØ", translit: "bard" },
      { category: "Weather", front: "warm", arabic: "ÿØÿßŸÅŸä", translit: "dafi" },
      { category: "Weather", front: "sunny", arabic: "ŸÖÿ¥ŸÖÿ≥", translit: "mshammes" },
      { category: "Weather", front: "cloudy", arabic: "ŸÖÿ∫ŸäŸÖ", translit: "mghayyem" },
      { category: "Weather", front: "rainy", arabic: "ŸÖŸÖÿ∑ÿ±", translit: "momter" },
      { category: "Weather", front: "snowy", arabic: "ŸÖÿ´ŸÑŸëÿ¨", translit: "mtallij" },

      { category: "Weather Nouns", front: "sun", arabic: "ÿ¥ŸÖÿ≥", translit: "shamas" },
      { category: "Weather Nouns", front: "rain", arabic: "ŸÖÿ∑ÿ±", translit: "matar" },
      { category: "Weather Nouns", front: "snow", arabic: "ÿ™ŸÑÿ¨", translit: "talj" },
      { category: "Weather Nouns", front: "wind / air", arabic: "ŸáŸàÿß", translit: "hawa" },

      { category: "Weather Phrases", front: "It's very windy.", arabic: "ŸÅŸä ŸÉÿ™Ÿäÿ± ŸáŸàÿß", translit: "fi kteer hawa" },
      { category: "Weather Phrases", front: "How is the weather today?", arabic: "ŸÉŸäŸÅ ÿßŸÑÿ¨Ÿà ÿßŸÑŸäŸàŸÖÿü", translit: "keef el-jaw elyom?" },
      { category: "Weather Phrases", front: "The weather today is nice.", arabic: "ÿßŸÑÿ¨Ÿà ÿßŸÑŸäŸàŸÖ ÿ≠ŸÑŸà", translit: "el-jaw elyom helou" },
      { category: "Weather Phrases", front: "The weather today is not nice.", arabic: "ÿßŸÑÿ¨Ÿà ÿßŸÑŸäŸàŸÖ ŸÖÿ¥ ÿ≠ŸÑŸà", translit: "el-jaw elyom mesh helou" },
      { category: "Weather Phrases", front: "The weather today is very nice.", arabic: "ÿßŸÑÿ¨Ÿà ÿßŸÑŸäŸàŸÖ ŸÉÿ™Ÿäÿ± ÿ≠ŸÑŸà", translit: "el-jaw elyom kteer helou" },
      { category: "Weather Phrases", front: "There is a lot of wind today.", arabic: "ŸÅŸä ŸÉÿ™Ÿäÿ± ŸáŸàÿß ÿßŸÑŸäŸàŸÖ", translit: "fi kteer hawa elyom" },
      { category: "Weather Phrases", front: "How is the weather in summer?", arabic: "ŸÉŸäŸÅ ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿµŸäŸÅÿü", translit: "keef el-jaw b-seif?" },
      { category: "Weather Phrases", front: "The weather in summer is very hot.", arabic: "ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿµŸäŸÅ ŸÉÿ™Ÿäÿ± ÿ¥Ÿàÿ®", translit: "el-jaw b-seif kteer shob" },
      { category: "Weather Phrases", front: "How is the weather in winter?", arabic: "ŸÉŸäŸÅ ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿ¥ÿ™ÿßÿü", translit: "keef el-jaw b-sheta?" },
      { category: "Weather Phrases", front: "The weather in winter is cold and snowy.", arabic: "ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿ¥ÿ™ÿß ÿ®ÿ±ÿØ ŸàŸÖÿ™ŸÑÿ¨", translit: "el-jaw b-sheta bard w mtallij" },
      { category: "Weather Phrases", front: "How is the weather in fall?", arabic: "ŸÉŸäŸÅ ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿÆÿ±ŸäŸÅÿü", translit: "keef el-jaw b-el-khareef?" },
      { category: "Weather Phrases", front: "How is the weather in spring?", arabic: "ŸÉŸäŸÅ ÿßŸÑÿ¨Ÿà ÿ®ÿßŸÑÿ±ÿ®Ÿäÿπÿü", translit: "keef el-jaw b-rabi?" },
      { category: "Weather Phrases", front: "The weather in spring is very warm.", arabic: "ÿßŸÑÿ∑ŸÇÿ≥ ÿ®ÿßŸÑÿ±ÿ®Ÿäÿπ ŸÉÿ™Ÿäÿ± ÿØÿßŸÅŸä", translit: "el-ta-es b-rabi kteer dafi" },
      { category: "Weather Phrases", front: "Tomorrow the weather is cold and rainy.", arabic: "ÿßŸÑÿ¨Ÿà ÿ®ŸÉÿ±ÿß ÿ®ÿ±ÿØ ŸàŸÖŸÖÿ∑ÿ±", translit: "el-jaw bukra bard w momter" },
      { category: "Weather Phrases", front: "Yesterday the weather was sunny.", arabic: "ÿßŸÑÿ¨Ÿà ŸÖÿ®ÿßÿ±ÿ≠ ŸÖÿ¥ŸÖÿ≥", translit: "el-jaw mbarah mshammes" },

      // 5. Have
      { category: "Have", front: "I have", arabic: "ÿπŸÜÿØŸä", translit: "andi" },
      { category: "Have", front: "you have (m)", arabic: "ÿπŸÜÿØŸÉ", translit: "andak" },
      { category: "Have", front: "you have (f)", arabic: "ÿπŸÜÿØŸêŸÉ", translit: "andek" },
      { category: "Have", front: "he has", arabic: "ÿπŸÜÿØŸá", translit: "ando" },
      { category: "Have", front: "she has", arabic: "ÿπŸÜÿØŸáÿß", translit: "anda" },
      { category: "Have", front: "we have", arabic: "ÿπŸÜÿØŸÜÿß", translit: "andna" },
      { category: "Have", front: "you (pl) have", arabic: "ÿπŸÜÿØŸÉŸÜ", translit: "andkon" },
      { category: "Have", front: "they have", arabic: "ÿπŸÜÿØŸÜ", translit: "andon" },

      { category: "Have Q&A", front: "Do you (m) have a question?", arabic: "ÿπŸÜÿØŸÉ ÿ≥ÿ§ÿßŸÑÿü", translit: "andak soal?" },
      { category: "Have Q&A", front: "Yes, I have a question.", arabic: "ÿ•Ÿäÿå ÿπŸÜÿØŸä ÿ≥ÿ§ÿßŸÑ", translit: "eh, andi soal" },
      { category: "Have Q&A", front: "No, I don't have a question.", arabic: "ŸÑÿßÿå ŸÖÿß ÿπŸÜÿØŸä ÿ≥ÿ§ÿßŸÑ", translit: "la, ma andi soal" },

      // 6. Question Words
      { category: "Questions", front: "what?", arabic: "ÿ¥Ÿà", translit: "shu" },
      { category: "Questions", front: "how?", arabic: "ŸÉŸäŸÅ", translit: "keef" },
      { category: "Questions", front: "where?", arabic: "ŸàŸäŸÜ", translit: "ween" },
      { category: "Questions", front: "when?", arabic: "ÿ•ŸÖÿ™Ÿâ", translit: "emta" },
      { category: "Questions", front: "why?", arabic: "ŸÑŸäÿ¥", translit: "lesh" },
      { category: "Questions", front: "who?", arabic: "ŸÖŸäŸÜ", translit: "meen" },
      { category: "Questions", front: "how much / how many?", arabic: "ŸÇÿØŸëŸäÿ¥", translit: "addeesh" },
      { category: "Questions", front: "is there / there is?", arabic: "ŸÅŸäÿü", translit: "fi?" },

      // 7. Pronouns
      { category: "Pronouns", front: "I", arabic: "ÿ£ŸÜÿß", translit: "ana" },
      { category: "Pronouns", front: "you (m)", arabic: "ÿ•ŸÜÿ™", translit: "enta" },
      { category: "Pronouns", front: "you (f)", arabic: "ÿ•ŸÜÿ™Ÿê", translit: "ente" },
      { category: "Pronouns", front: "he", arabic: "ŸáŸà", translit: "howwe" },
      { category: "Pronouns", front: "she", arabic: "ŸáŸä", translit: "heyye" },
      { category: "Pronouns", front: "we", arabic: "ŸÜÿ≠ŸÜÿß", translit: "nehna" },
      { category: "Pronouns", front: "you (pl)", arabic: "ÿ•ŸÜÿ™Ÿà", translit: "ento" },
      { category: "Pronouns", front: "they", arabic: "ŸáŸÜŸä", translit: "henne" },

      // 8. Everyday Phrases
      { category: "Everyday", front: "How are you today? (to m)", arabic: "ŸÉŸäŸÅŸÉ ÿßŸÑŸäŸàŸÖÿü", translit: "keefak elyom?" },
      { category: "Everyday", front: "How are you today? (to f)", arabic: "ŸÉŸäŸÅŸÉ ÿßŸÑŸäŸàŸÖÿü", translit: "keefek elyom?" },
      { category: "Everyday", front: "I'm good (m).", arabic: "ŸÖŸÜŸäÿ≠", translit: "mneeh" },
      { category: "Everyday", front: "I'm good (f).", arabic: "ŸÖŸÜŸäÿ≠ÿ©", translit: "mneeha" },
      { category: "Everyday", front: "My day is good.", arabic: "ŸäŸàŸÖŸä ŸÖŸÜŸäÿ≠", translit: "yomi mneeh" },
      { category: "Everyday", front: "Just a second.", arabic: "ŸÑÿ≠ÿ∏ÿ©", translit: "lahza" },
      { category: "Everyday", front: "only / just / but", arabic: "ÿ®ÿ≥", translit: "bas" },

      // 9. Feelings & adjectives
      { category: "Feelings", front: "hungry (m)", arabic: "ÿ¨ŸàÿπÿßŸÜ", translit: "jouaan" },
      { category: "Feelings", front: "hungry (f)", arabic: "ÿ¨ŸàÿπÿßŸÜÿ©", translit: "jouaaneh" },
      { category: "Feelings", front: "thirsty (m)", arabic: "ÿπÿ∑ÿ¥ÿßŸÜ", translit: "atshan" },
      { category: "Feelings", front: "thirsty (f)", arabic: "ÿπÿ∑ÿ¥ÿßŸÜÿ©", translit: "atshaneh" },
      { category: "Feelings", front: "tired (m)", arabic: "ÿ™ÿπÿ®ÿßŸÜ", translit: "taaban" },
      { category: "Feelings", front: "tired (f)", arabic: "ÿ™ÿπÿ®ÿßŸÜÿ©", translit: "taabaneh" },
      { category: "Feelings", front: "cold (feeling, m)", arabic: "ÿ®ÿ±ÿØÿßŸÜ", translit: "bardan" },
      { category: "Feelings", front: "cold (feeling, f)", arabic: "ÿ®ÿ±ÿØÿßŸÜÿ©", translit: "bardaneh" },
      { category: "Feelings", front: "hot (feeling, m)", arabic: "ŸÖÿ¥Ÿàÿ®", translit: "mashoob" },
      { category: "Feelings", front: "hot (feeling, f)", arabic: "ŸÖÿ¥Ÿàÿ®ÿ©", translit: "mashoobeh" },
      { category: "Feelings", front: "happy (m)", arabic: "ŸÖÿ®ÿ≥Ÿàÿ∑", translit: "mabsout" },
      { category: "Feelings", front: "happy (f)", arabic: "ŸÖÿ®ÿ≥Ÿàÿ∑ÿ©", translit: "mabsouta" },
      { category: "Feelings", front: "sad (m)", arabic: "ÿ≤ÿπŸÑÿßŸÜ", translit: "zaalan" },
      { category: "Feelings", front: "sad (f)", arabic: "ÿ≤ÿπŸÑÿßŸÜÿ©", translit: "zaalaneh" },
      { category: "Feelings", front: "sick (m)", arabic: "ŸÖÿ±Ÿäÿ∂", translit: "mareed" },
      { category: "Feelings", front: "sick (f)", arabic: "ŸÖÿ±Ÿäÿ∂ÿ©", translit: "mareeda" },
      { category: "Feelings", front: "I am hungry (m)", arabic: "ÿ£ŸÜÿß ÿ¨ŸàÿπÿßŸÜ", translit: "ana jouaan" },
      { category: "Feelings", front: "I am tired (f)", arabic: "ÿ£ŸÜÿß ÿ™ÿπÿ®ÿßŸÜÿ©", translit: "ana taabaneh" },

      // 10. Verbs: want / like / need
      { category: "Verbs", front: "I want", arabic: "ÿ®ÿØŸä", translit: "bedde" },
      { category: "Verbs", front: "you want (m)", arabic: "ÿ®ÿØŸÉ", translit: "bedak" },
      { category: "Verbs", front: "you want (f)", arabic: "ÿ®ÿØŸêŸÉ", translit: "bedek" },
      { category: "Verbs", front: "he wants", arabic: "ÿ®ÿØŸá", translit: "bedo" },
      { category: "Verbs", front: "she wants", arabic: "ÿ®ÿØŸáÿß", translit: "beda" },
      { category: "Verbs", front: "I like / I love", arabic: "ÿ®ÿ≠ÿ®", translit: "behebb" },
      { category: "Verbs", front: "I need", arabic: "ŸÑÿßÿ≤ŸÖ", translit: "lazem" },
      { category: "Verbs", front: "I want coffee.", arabic: "ÿ®ÿØŸä ŸÇŸáŸàÿ©", translit: "bedde ahwe" },
      { category: "Verbs", front: "I like Beirut.", arabic: "ÿ®ÿ≠ÿ® ÿ®Ÿäÿ±Ÿàÿ™", translit: "behebb Beirut" },

      /* DAYS OF THE WEEK */
      { category: "Days", front: "Sunday", arabic: "ÿßŸÑÿ£ÿ≠ÿØ", translit: "el-ahad" },
      { category: "Days", front: "Monday", arabic: "ÿßŸÑÿ•ÿ´ŸÜŸäŸÜ", translit: "et-tnein" },
      { category: "Days", front: "Tuesday", arabic: "ÿßŸÑÿ´ŸÑÿßÿ´ÿßÿ°", translit: "et-talata" },
      { category: "Days", front: "Wednesday", arabic: "ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°", translit: "el-arbaa" },
      { category: "Days", front: "Thursday", arabic: "ÿßŸÑÿÆŸÖŸäÿ≥", translit: "el-khamees" },
      { category: "Days", front: "Friday", arabic: "ÿßŸÑÿ¨ŸÖÿπÿ©", translit: "el-jomaa" },
      { category: "Days", front: "Saturday", arabic: "ÿßŸÑÿ≥ÿ®ÿ™", translit: "es-sabt" },

      /* TIME WORDS */
      { category: "Time Words", front: "today", arabic: "ÿßŸÑŸäŸàŸÖ", translit: "elyom" },
      { category: "Time Words", front: "tomorrow", arabic: "ÿ®ŸÉÿ±ÿß", translit: "bukra" },
      { category: "Time Words", front: "day after tomorrow", arabic: "ÿ®ÿπÿØ ÿ®ŸÉÿ±ÿß", translit: "baad bukra" },
      { category: "Time Words", front: "yesterday", arabic: "ŸÖÿ®ÿßÿ±ÿ≠", translit: "mbarah" },
      { category: "Time Words", front: "day before yesterday", arabic: "ŸÇÿ®ŸÑ ŸÖÿ®ÿßÿ±ÿ≠", translit: "abl mbarah" },
      { category: "Time Words", front: "now", arabic: "ŸáŸÑŸëŸÇ", translit: "halla" },

      /* TIME OF DAY */
      { category: "Time of Day", front: "in the morning", arabic: "ÿßŸÑÿµÿ®ÿ≠", translit: "el-sobh" },
      { category: "Time of Day", front: "at noon", arabic: "ÿßŸÑÿ∏Ÿáÿ±", translit: "el-zohor" },
      { category: "Time of Day", front: "in the afternoon", arabic: "ÿ®ÿπÿØ ÿßŸÑÿ∏Ÿáÿ±", translit: "baad el-zohor" },
      { category: "Time of Day", front: "afternoon (alt.)", arabic: "ÿßŸÑÿπÿµÿ±", translit: "el-asr" },
      { category: "Time of Day", front: "in the evening", arabic: "ÿßŸÑŸÖÿ≥ÿß", translit: "el-masa" },
      { category: "Time of Day", front: "at night", arabic: "ÿ®ÿßŸÑŸÑŸäŸÑ", translit: "bel-leel" },
      { category: "Time of Day", front: "dawn", arabic: "ÿßŸÑŸÅÿ¨ÿ±", translit: "el-fajr" },
      { category: "Time of Day", front: "early morning", arabic: "Ÿàÿ¥Ÿë ÿßŸÑÿµÿ®ÿ≠", translit: "wesh el-sobh" },

      /* SEASONS */
      { category: "Seasons", front: "summer", arabic: "ÿµŸäŸÅ", translit: "seif" },
      { category: "Seasons", front: "winter", arabic: "ÿ¥ÿ™ÿß", translit: "sheta" },
      { category: "Seasons", front: "spring", arabic: "ÿ±ÿ®Ÿäÿπ", translit: "rabi" },
      { category: "Seasons", front: "fall", arabic: "ÿÆÿ±ŸäŸÅ", translit: "khareef" },

      /* WEATHER */
      { category: "Weather", front: "weather", arabic: "ÿßŸÑÿ∑ŸÇÿ≥", translit: "el-ta-es" },
      { category: "Weather", front: "sun", arabic: "ÿ¥ŸÖÿ≥", translit: "shamas" },
      { category: "Weather", front: "rain", arabic: "ŸÖÿ∑ÿ±", translit: "matar" },
      { category: "Weather", front: "snow", arabic: "ÿ™ŸÑÿ¨", translit: "talj" },
      { category: "Weather", front: "wind", arabic: "ŸáŸàÿß", translit: "hawa" },

      /* INTRODUCTIONS */
      { category: "Introductions", front: "What is your name? (m)", arabic: "ÿ¥Ÿà ÿßÿ≥ŸÖŸÉÿü", translit: "shoo esmak" },
      { category: "Introductions", front: "What is your name? (f)", arabic: "ÿ¥Ÿà ÿßÿ≥ŸÖŸêŸÉÿü", translit: "shoo esmik" },
      { category: "Introductions", front: "My name is Ali", arabic: "ÿßÿ≥ŸÖŸä ÿπŸÑŸä", translit: "esme Ali" },
      { category: "Introductions", front: "How old are you?", arabic: "ŸÇÿØŸäÿ¥ ÿπŸÖÿ±ŸÉÿü", translit: "addeesh omrak?" },
      { category: "Introductions", front: "I am 10", arabic: "ÿ£ŸÜÿß ÿπÿ¥ÿ±ÿ©", translit: "ana ashra" },
      { category: "Introductions", front: "From which country (m)", arabic: "ŸÖŸÜ ÿ£ŸäŸë ÿ®ŸÑÿØ ÿ•ŸÜÿ™ÿü", translit: "men ayya balad enta" },
      { category: "Introductions", front: "From which country (f)", arabic: "ŸÖŸÜ ÿ£ŸäŸë ÿ®ŸÑÿØ ÿ•ŸÜÿ™Ÿêÿü", translit: "men ayya balad ente" },
      { category: "Introductions", front: "I am from Germany", arabic: "ÿ£ŸÜÿß ŸÖŸÜ ÿ£ŸÑŸÖÿßŸÜŸäÿß", translit: "ana men Almaniya" },

      /* NUMBERS 0‚Äì12 */
      { category: "Numbers", front: "0 ‚Äî zero", arabic: "ÿµŸÅÿ±", translit: "sefr" },
      { category: "Numbers", front: "1 ‚Äî one", arabic: "Ÿàÿßÿ≠ÿØ", translit: "wahed" },
      { category: "Numbers", front: "2 ‚Äî two", arabic: "ÿ™ŸÜŸäŸÜ", translit: "tneen" },
      { category: "Numbers", front: "3 ‚Äî three", arabic: "ÿ™ŸÑÿßÿ™ÿ©", translit: "talateh" },
      { category: "Numbers", front: "4 ‚Äî four", arabic: "ÿ£ÿ±ÿ®ÿπÿ©", translit: "arbaa" },
      { category: "Numbers", front: "5 ‚Äî five", arabic: "ÿÆŸÖÿ≥ÿ©", translit: "khamse" },
      { category: "Numbers", front: "6 ‚Äî six", arabic: "ÿ≥ÿ™ÿ©", translit: "sette" },
      { category: "Numbers", front: "7 ‚Äî seven", arabic: "ÿ≥ÿ®ÿπÿ©", translit: "sabaa" },
      { category: "Numbers", front: "8 ‚Äî eight", arabic: "ÿ™ŸÖÿßŸÜÿ©", translit: "tmaneh" },
      { category: "Numbers", front: "9 ‚Äî nine", arabic: "ÿ™ÿ≥ÿπÿ©", translit: "tesaa" },
      { category: "Numbers", front: "10 ‚Äî ten", arabic: "ÿπÿ¥ÿ±ÿ©", translit: "ashra" },
      { category: "Numbers", front: "11 ‚Äî eleven", arabic: "ÿ≠ÿØÿπÿ¥", translit: "hdaash" },
      { category: "Numbers", front: "12 ‚Äî twelve", arabic: "ÿ∑ŸÜÿπÿ¥", translit: "tnaash" },

      /* NUMBERS FOR TIME (wahde / tntein) */
      { category: "Numbers (Time)", front: "one (time)", arabic: "Ÿàÿ≠ÿØÿ©", translit: "wahde" },
      { category: "Numbers (Time)", front: "two (time)", arabic: "ÿ™ŸÜÿ™ŸäŸÜ", translit: "tntein" },

      /* TELLING TIME (MINUTES) */
      { category: "Telling Time", front: "5 minutes", arabic: "ÿÆŸÖÿ≥ÿ©", translit: "khamse" },
      { category: "Telling Time", front: "10 minutes", arabic: "ÿπÿ¥ÿ±ÿ©", translit: "ashra" },
      { category: "Telling Time", front: "15 (quarter)", arabic: "ÿ±ÿ®ÿπ", translit: "rebaa" },
      { category: "Telling Time", front: "20 (third)", arabic: "ÿ™ŸÑÿ™", translit: "telt" },
      { category: "Telling Time", front: "25", arabic: "ÿ™ŸÑÿ™ ŸàÿÆŸÖÿ≥ÿ©", translit: "telt w khamse" },
      { category: "Telling Time", front: "30 (half)", arabic: "ŸÜÿµ", translit: "noss" },
      { category: "Telling Time", front: "35", arabic: "ÿÆŸÖÿ≥ÿ© Ÿàÿ™ŸÑÿ™", translit: "khamse w telt" },
      { category: "Telling Time", front: "40", arabic: "ÿ•ŸÑÿß ÿ™ŸÑÿ™", translit: "ella telt" },
      { category: "Telling Time", front: "45", arabic: "ÿ•ŸÑÿß ÿ±ÿ®ÿπ", translit: "ella rebaa" },
      { category: "Telling Time", front: "50", arabic: "ÿ•ŸÑÿß ÿπÿ¥ÿ±ÿ©", translit: "ella ashra" },

      /* FULL TIME EXAMPLES */
      { category: "Telling Time", front: "1:00", arabic: "ÿßŸÑÿ≥ÿßÿπÿ© Ÿàÿ≠ÿØÿ©", translit: "es-saa-a wahde" },
      { category: "Telling Time", front: "2:00", arabic: "ÿßŸÑÿ≥ÿßÿπÿ© ÿ™ŸÜÿ™ŸäŸÜ", translit: "es-saa-a tntein" },
      { category: "Telling Time", front: "7:40", arabic: "ÿ™ŸÖÿßŸÜÿ© ÿ•ŸÑÿß ÿ™ŸÑÿ™", translit: "tmaneh ella telt" },

      /* TIME QUESTIONS */
      { category: "Time Questions", front: "What time is it?", arabic: "ŸÇÿØŸäÿ¥ ÿßŸÑÿ≥ÿßÿπÿ©ÿü", translit: "addeesh es-saa-a?" },
      { category: "Time Questions", front: "What time is it now?", arabic: "ŸÇÿØŸäÿ¥ ÿßŸÑÿ≥ÿßÿπÿ© ŸáŸÑŸëŸÇÿü", translit: "addeesh es-saa-a halla?" },
      { category: "Time Questions", front: "What's the time now?", arabic: "ŸÇÿØŸäÿ¥ ÿßŸÑŸàŸÇÿ™ ŸáŸÑŸëŸÇÿü", translit: "addeesh el-waet halla?" },

      /* SMALL TALK */
      { category: "Small Talk", front: "What's up?", arabic: "ÿ¥Ÿà ÿßŸÑÿ£ÿÆÿ®ÿßÿ±ÿü", translit: "shoo l-akhbar?" },
      { category: "Small Talk", front: "Nothing new", arabic: "ŸÖÿß ŸÅŸä ÿ¥Ÿä ÿ¨ÿØŸäÿØ", translit: "ma fi shi jdeed" },

      /* MISC */
      { category: "Misc", front: "number", arabic: "ÿ±ŸÇŸÖ", translit: "ra2am" },
      { category: "Misc", front: "numbers", arabic: "ÿ£ÿ±ŸÇÿßŸÖ", translit: "ar2aam" },

      /* BONUS PHRASES */
      { category: "Bonus Phrases", front: "I like studying Arabic at night", arabic: "ÿ®ÿ≠ÿ® ÿ•ÿØÿ±ÿ≥ ÿπÿ±ÿ®Ÿä ÿ®ÿßŸÑŸÑŸäŸÑ", translit: "behebb edros arabi bel-leel" },
      { category: "Bonus Phrases", front: "I'm trying to speak only Arabic in class", arabic: "ÿπŸÖ ÿ¨ÿ±Ÿëÿ® ÿ•ÿ≠ŸÉŸä ÿ®ÿ≥ ÿπÿ±ÿ®Ÿä ÿ®ÿßŸÑÿµŸÅ", translit: "am jarrib ehki bas arabi bel-saff" },
      { category: "Bonus Phrases", front: "Your explanations are very clear", arabic: "ÿ¥ÿ±ÿ≠ŸÉ ÿØÿßŸäŸÖŸãÿß ŸÉÿ™Ÿäÿ± Ÿàÿßÿ∂ÿ≠", translit: "sharhak dayman kteer waadeh" }
    ];

    /* ---- STATE ---- */
    let known = JSON.parse(localStorage.getItem("known") || "[]");
    let index = 0;
    let showFront = true;

    /* ---- DOM REFERENCES ---- */
    const cardEl = document.getElementById("card");
    const contentEl = document.getElementById("card-content");
    const categoryEl = document.getElementById("category-pill");
    /* FIX ‚Äî Tap card to flip */
cardEl.onclick = () => { showFront = !showFront; render(); };
    const sideLabelEl = document.getElementById("side-label");
    const knownPillEl = document.getElementById("known-pill");

    const counterEl = document.getElementById("counter");
    const prevBtn = document.getElementById("prev-btn");
    const nextBtn = document.getElementById("next-btn");
    const flipBtn = document.getElementById("flip-btn");
    const shuffleBtn = document.getElementById("shuffle-btn");
    const toggleKnownBtn = document.getElementById("toggle-known-btn");

    const categoryFilterEl = document.getElementById("category-filter");
    const statusFilterEl = document.getElementById("status-filter");

    const listView = document.getElementById("list-view");
    const cardsView = document.getElementById("cards-view");
    const quizView = document.getElementById("quiz-view");

    const tabCards = document.getElementById("tab-cards");
    const tabList = document.getElementById("tab-list");
    const tabQuiz = document.getElementById("tab-quiz");

    /* ---- RENDER CARD ---- */
    function render() {
      const card = cards[index];

      /* filter */
      const total = cards.length;
      counterEl.textContent = `${index + 1} / ${total}`;
      categoryEl.textContent = card.category;

      /* known pill */
      knownPillEl.style.display = known.includes(index) ? "block" : "none";
      toggleKnownBtn.textContent = known.includes(index) ? "Mark Unknown" : "Mark Known";

      /* content */
      contentEl.innerHTML = "";
      if (showFront) {
        sideLabelEl.textContent = "Front ¬∑ EN";
        const en = document.createElement("div");
        en.className = "english";
        en.textContent = card.front;
        contentEl.appendChild(en);
      } else {
        sideLabelEl.textContent = "Back ¬∑ AR";
        const ar = document.createElement("div");
        ar.className = "arabic";
        ar.textContent = card.arabic;
        const tr = document.createElement("div");
        tr.className = "translit";
        tr.textContent = card.translit;
        contentEl.appendChild(ar);
        contentEl.appendChild(tr);
      }
    }

    /* ---- BUTTONS ---- */
    flipBtn.onclick = () => { showFront = !showFront; render(); };
    nextBtn.onclick = () => { index = (index + 1) % cards.length; showFront = true; render(); };
    prevBtn.onclick = () => { index = (index - 1 + cards.length) % cards.length; showFront = true; render(); };

    toggleKnownBtn.onclick = () => {
      if (known.includes(index)) {
        known = known.filter(i => i !== index);
      } else {
        known.push(index);
      }
      localStorage.setItem("known", JSON.stringify(known));
      render();
    };

    shuffleBtn.onclick = () => {
      for (let i = cards.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [cards[i], cards[j]] = [cards[j], cards[i]];
      }
      index = 0;
      showFront = true;
      render();
    };

    /* ---- TABS ---- */
    tabCards.onclick = () => {
      cardsView.style.display = "block";
      listView.style.display = "none";
      quizView.style.display = "none";
      tabCards.classList.add("active");
      tabList.classList.remove("active");
      tabQuiz.classList.remove("active");
    };

    tabList.onclick = () => {
      cardsView.style.display = "none";
      listView.style.display = "block";
      quizView.style.display = "none";
      tabList.classList.add("active");
      tabCards.classList.remove("active");
      tabQuiz.classList.remove("active");
      renderList();
    };

    tabQuiz.onclick = () => {
      cardsView.style.display = "none";
      listView.style.display = "none";
      quizView.style.display = "block";
      tabQuiz.classList.add("active");
      tabCards.classList.remove("active");
      tabList.classList.remove("active");
      startQuiz();
    };

    /* ---- WORD LIST ---- */
    const listCategoryFilter = document.getElementById("list-category-filter");
    const listBody = document.getElementById("list-body");
    const listSearch = document.getElementById("list-search");

    /* fill category filters */
    const categories = [...new Set(cards.map(c => c.category))].sort();
    categoryFilterEl.innerHTML = `<option value="All">All</option>` + categories.map(c=>`<option value="${c}">${c}</option>`).join("");
    listCategoryFilter.innerHTML = `<option value="All">All</option>` + categories.map(c=>`<option value="${c}">${c}</option>`).join("");

    function renderList() {
      const cat = listCategoryFilter.value;
      const term = listSearch.value.toLowerCase();

      listBody.innerHTML = "";

      cards
        .map((card, i) => ({...card, i}))
        .filter(c => cat==="All" || c.category===cat)
        .filter(c => c.front.toLowerCase().includes(term))
        .sort((a,b)=>a.front.localeCompare(b.front))
        .forEach(item => {
          const div = document.createElement("div");
          div.className = "list-item";
          div.innerHTML = `
            <div class="list-row-main">
              <div>
                <div class="list-en">${item.front}</div>
                <div class="list-tr">${item.translit}</div>
              </div>
              <div class="list-ar">${item.arabic}</div>
            </div>
            <div class="list-meta">
              <span class="badge-category">${item.category}</span>
              ${known.includes(item.i) ? `<span class="badge-known">Known</span>` : ``}
            </div>
          `;
          div.onclick = () => {
            index = item.i;
            showFront = true;
            tabCards.onclick();
            render();
          };
          listBody.appendChild(div);
        });
    }

    listCategoryFilter.onchange = renderList;
    listSearch.oninput = renderList;

    /* ---- QUIZ ---- */
    function startQuiz() {
      const quizPanel = document.getElementById("quiz-panel");
      const quizQuestion = document.getElementById("quiz-question");
      const quizOptions = document.getElementById("quiz-options");
      const quizProgress = document.getElementById("quiz-progress");
      const quizResult = document.getElementById("quiz-result");

      quizPanel.style.display = "flex";
      let order = [...Array(cards.length).keys()];
      order.sort(()=>Math.random()-0.5);
      order = order.slice(0, 10);
      let qi = 0;

      function ask() {
        if (qi >= order.length) {
          quizQuestion.textContent = "Quiz complete!";
          quizOptions.innerHTML = "";
          quizResult.textContent = "";
          quizProgress.textContent = "";
          return;
        }

        const idx = order[qi];
        const c = cards[idx];
        quizQuestion.textContent = `Arabic for: ${c.front}`;
        quizProgress.textContent = `${qi+1} / ${order.length}`;

        const answers = [c.arabic];
        while (answers.length < 4) {
          const r = cards[Math.floor(Math.random()*cards.length)].arabic;
          if (!answers.includes(r)) answers.push(r);
        }
        answers.sort(()=>Math.random()-0.5);

        quizOptions.innerHTML = "";
        answers.forEach(ans=>{
          const btn = document.createElement("div");
          btn.className = "quiz-option";
          btn.textContent = ans;
          btn.onclick = () => {
            if (ans === c.arabic) {
              btn.classList.add("correct");
              setTimeout(()=>{ qi++; ask(); }, 600);
            } else {
              btn.classList.add("wrong");
            }
          };
          quizOptions.appendChild(btn);
        });
      }

      ask();
    }

    /* ---- THEME ---- */
    const themeBtns = document.querySelectorAll(".theme-btn");

    function applyTheme(t) {
      document.body.classList.remove("theme-minimal","theme-colorful","theme-dark");
      document.body.classList.add(`theme-${t}`);
      localStorage.setItem("app-theme", t);
      themeBtns.forEach(btn=>{
        btn.classList.toggle("theme-active", btn.dataset.theme===t);
      });
    }

    themeBtns.forEach(btn=>{
      btn.onclick = () => applyTheme(btn.dataset.theme);
    });

    const savedTheme = localStorage.getItem("app-theme") || "colorful";
    applyTheme(savedTheme);

    /* ---- INIT ---- */
    render();

  </script>
</body>
</html>
